# Техническая спецификация системы (SRS)
## Система управления дефектами на строительных объектах

**Версия:** 1.0  
**Дата:** Январь 2024  
**Заказчик:** ООО «СистемаКонтроля»  
**Исполнитель:** Команда разработки  

---

## 1. Введение

### 1.1 Назначение документа
Данный документ представляет собой техническую спецификацию (Software Requirements Specification, SRS) системы управления дефектами на строительных объектах. Документ определяет функциональные и нефункциональные требования к системе, а также служит основой для проектирования, разработки и тестирования.

### 1.2 Область применения
Система предназначена для:
- Централизованного управления дефектами на строительных объектах
- Автоматизации процессов регистрации, отслеживания и устранения дефектов
- Повышения прозрачности работы между всеми участниками строительного процесса
- Формирования аналитической отчётности для принятия управленческих решений

### 1.3 Целевая аудитория
- **Инженеры** - специалисты, выявляющие и регистрирующие дефекты
- **Менеджеры проектов** - руководители, назначающие задачи и контролирующие сроки
- **Руководители и заказчики** - лица, принимающие решения на основе отчётности

### 1.4 Определения и сокращения

| Термин | Определение |
|--------|------------|
| Дефект | Несоответствие выполненных работ проектным требованиям или строительным нормам |
| CRUD | Create, Read, Update, Delete - базовые операции с данными |
| JWT | JSON Web Token - стандарт для безопасной передачи информации |
| SLA | Service Level Agreement - соглашение об уровне обслуживания |
| OWASP | Open Web Application Security Project - стандарты безопасности веб-приложений |

---

## 2. Общее описание системы

### 2.1 Функции продукта
Система обеспечивает следующие основные функции:

1. **Управление пользователями и доступом**
   - Регистрация и аутентификация пользователей
   - Разграничение прав доступа по ролям
   - Управление профилями пользователей

2. **Управление проектами**
   - Создание и ведение карточек строительных объектов
   - Управление этапами строительства
   - Назначение участников проекта

3. **Управление дефектами**
   - Регистрация дефектов с детальным описанием
   - Прикрепление фотографий и документов
   - Назначение ответственных и сроков устранения
   - Отслеживание статусов выполнения

4. **Коммуникация и уведомления**
   - Система комментариев к дефектам
   - История изменений
   - Уведомления о важных событиях

5. **Отчётность и аналитика**
   - Формирование отчётов по проектам и исполнителям
   - Экспорт данных в различных форматах
   - Аналитические дашборды с графиками

### 2.2 Пользователи системы

#### 2.2.1 Инженер
**Права доступа:**
- Просмотр назначенных проектов
- Создание и редактирование дефектов
- Добавление комментариев
- Обновление статусов назначенных дефектов
- Просмотр отчётов по своей работе

**Типичные сценарии использования:**
- Обход объекта и выявление дефектов
- Фотофиксация и описание нарушений
- Отслеживание процесса устранения
- Подтверждение выполнения работ

#### 2.2.2 Менеджер проекта
**Права доступа:**
- Полный доступ к проектам под управлением
- Создание и редактирование проектов
- Назначение дефектов исполнителям
- Контроль сроков выполнения
- Формирование отчётности
- Управление участниками проекта

**Типичные сценарии использования:**
- Планирование работ по устранению дефектов
- Контроль качества выполнения
- Подготовка отчётов для руководства
- Координация работы команды

#### 2.2.3 Наблюдатель (Руководитель/Заказчик)
**Права доступа:**
- Просмотр всех проектов (в рамках организации)
- Просмотр отчётности и аналитики
- Экспорт данных
- Только чтение (без права редактирования)

**Типичные сценарии использования:**
- Мониторинг общего состояния проектов
- Анализ эффективности работы
- Принятие управленческих решений
- Взаимодействие с заказчиками

### 2.3 Ограничения системы

#### 2.3.1 Технические ограничения
- Максимальный размер загружаемого файла: 10 МБ
- Поддерживаемые форматы изображений: JPEG, PNG, GIF
- Поддерживаемые форматы документов: PDF, DOC, DOCX
- Максимальное количество одновременных пользователей: 100

#### 2.3.2 Операционные ограничения
- Система работает в режиме 24/7 с плановыми окнами обслуживания
- Резервное копирование выполняется ежедневно в 02:00
- Хранение данных в течение 7 лет согласно требованиям законодательства

---

## 3. Функциональные требования

### 3.1 Управление пользователями (FR-1)

#### FR-1.1 Регистрация пользователей
**Описание:** Система должна обеспечивать регистрацию новых пользователей администратором.

**Входные данные:**
- Имя пользователя (уникальное)
- Электронная почта (уникальная)
- Пароль (минимум 8 символов, содержащий буквы, цифры и специальные символы)
- Роль пользователя
- ФИО
- Должность
- Телефон (опционально)

**Выходные данные:**
- Подтверждение создания аккаунта
- Временный пароль для первого входа

**Бизнес-правила:**
- Имя пользователя должно быть уникальным в системе
- Электронная почта должна соответствовать стандартному формату
- Пароль должен соответствовать политике безопасности

#### FR-1.2 Аутентификация
**Описание:** Система должна проверять подлинность пользователей при входе.

**Входные данные:**
- Имя пользователя или электронная почта
- Пароль

**Выходные данные:**
- JWT токен при успешной аутентификации
- Сообщение об ошибке при неудачной попытке

**Бизнес-правила:**
- Блокировка аккаунта на 15 минут после 5 неудачных попыток
- Токен действителен в течение 8 часов
- Автоматический выход при неактивности более 2 часов

#### FR-1.3 Авторизация по ролям
**Описание:** Система должна ограничивать доступ к функциям на основе ролей пользователей.

**Роли и права доступа:**

| Функция | Инженер | Менеджер | Наблюдатель |
|---------|---------|----------|-------------|
| Просмотр проектов | Назначенные | Управляемые | Все |
| Создание дефектов | ✓ | ✓ | ✗ |
| Редактирование дефектов | Свои | Все в проекте | ✗ |
| Назначение исполнителей | ✗ | ✓ | ✗ |
| Создание проектов | ✗ | ✓ | ✗ |
| Просмотр отчётов | Свои | По проектам | Все |
| Экспорт данных | ✗ | ✓ | ✓ |

### 3.2 Управление проектами (FR-2)

#### FR-2.1 Создание проекта
**Описание:** Менеджеры должны иметь возможность создавать новые строительные проекты.

**Входные данные:**
- Название проекта
- Описание проекта
- Адрес объекта
- Заказчик
- Планируемые даты начала и завершения
- Менеджер проекта
- Участники проекта

**Выходные данные:**
- Уникальный идентификатор проекта
- Подтверждение создания

**Бизнес-правила:**
- Название проекта должно быть уникальным
- Дата начала не может быть позже даты завершения
- У проекта должен быть назначен менеджер

#### FR-2.2 Управление этапами
**Описание:** Система должна поддерживать разбиение проекта на этапы.

**Входные данные:**
- Название этапа
- Описание
- Плановые даты
- Ответственный

**Этапы по умолчанию:**
1. Подготовительные работы
2. Фундаментные работы
3. Возведение несущих конструкций
4. Кровельные работы
5. Инженерные системы
6. Отделочные работы
7. Благоустройство территории

### 3.3 Управление дефектами (FR-3)

#### FR-3.1 Создание дефекта
**Описание:** Пользователи должны иметь возможность регистрировать выявленные дефекты.

**Входные данные:**
- Заголовок дефекта (обязательно)
- Детальное описание (обязательно)
- Проект и этап (обязательно)
- Категория дефекта (выбор из справочника)
- Приоритет (Низкий/Средний/Высокий/Критический)
- Местоположение (текстовое описание)
- Фотографии (до 5 файлов)
- Документы (до 3 файлов)

**Выходные данные:**
- Уникальный номер дефекта
- Подтверждение регистрации

**Бизнес-правила:**
- Автоматическое назначение статуса "Новый"
- Автоматическая установка даты создания
- Автоматическое назначение автора

#### FR-3.2 Жизненный цикл дефекта
**Описание:** Система должна поддерживать следующие статусы дефектов:

1. **Новый** - дефект зарегистрирован, но не назначен исполнитель
2. **В работе** - назначен исполнитель, работы ведутся
3. **На проверке** - исполнитель сообщил о выполнении, требуется проверка
4. **Закрыт** - дефект устранён и проверен
5. **Отменён** - дефект признан недействительным

**Переходы между статусами:**
- Новый → В работе (назначение исполнителя менеджером)
- В работе → На проверке (исполнитель сообщает о выполнении)
- На проверке → Закрыт (проверяющий подтверждает выполнение)
- На проверке → В работе (проверяющий отклоняет выполнение)
- Любой статус → Отменён (менеджер или автор дефекта)

#### FR-3.3 Назначение исполнителей
**Описание:** Менеджеры должны иметь возможность назначать ответственных за устранение дефектов.

**Входные данные:**
- Исполнитель (выбор из участников проекта)
- Плановая дата устранения
- Комментарий к назначению

**Бизнес-правила:**
- Исполнитель должен быть участником проекта
- Плановая дата не может быть в прошлом
- При назначении статус автоматически меняется на "В работе"

#### FR-3.4 Комментарии и история
**Описание:** Система должна вести историю всех изменений дефекта и позволять добавлять комментарии.

**Функции:**
- Добавление комментариев всеми участниками
- Автоматическое логирование изменений статуса
- Автоматическое логирование назначения исполнителей
- Хронологический порядок отображения

### 3.4 Поиск и фильтрация (FR-4)

#### FR-4.1 Поиск дефектов
**Описание:** Система должна обеспечивать быстрый поиск дефектов по различным критериям.

**Критерии поиска:**
- Текстовый поиск по заголовку и описанию
- Фильтр по проекту
- Фильтр по статусу
- Фильтр по приоритету
- Фильтр по исполнителю
- Фильтр по датам создания/завершения
- Фильтр по категории

**Возможности:**
- Комбинирование нескольких фильтров
- Сохранение часто используемых фильтров
- Экспорт результатов поиска

### 3.5 Отчётность (FR-5)

#### FR-5.1 Стандартные отчёты
**Описание:** Система должна генерировать стандартные отчёты.

**Типы отчётов:**
1. **Отчёт по проекту** - статистика дефектов по проекту
2. **Отчёт по исполнителю** - производительность сотрудника
3. **Сводный отчёт** - общая статистика по всем проектам
4. **Отчёт по срокам** - анализ соблюдения сроков
5. **Отчёт по категориям** - распределение дефектов по типам

**Форматы экспорта:**
- CSV
- Excel (XLSX)
- PDF

#### FR-5.2 Аналитические дашборды
**Описание:** Система должна предоставлять визуальную аналитику.

**Виджеты дашборда:**
- Общее количество дефектов по статусам (круговая диаграмма)
- Динамика создания/закрытия дефектов (линейный график)
- Топ исполнителей по количеству закрытых дефектов
- Распределение дефектов по приоритетам
- Средние сроки устранения дефектов
- Карта проектов с индикаторами состояния

---

## 4. Нефункциональные требования

### 4.1 Производительность (NFR-1)

#### NFR-1.1 Время отклика
- Загрузка страниц: ≤ 1 секунды при 50 одновременных пользователях
- API запросы: ≤ 500 мс для простых операций
- Поиск: ≤ 2 секунды для сложных запросов
- Генерация отчётов: ≤ 10 секунд для стандартных отчётов

#### NFR-1.2 Пропускная способность
- Поддержка до 100 одновременных пользователей
- Обработка до 1000 запросов в минуту
- Загрузка файлов до 10 МБ

#### NFR-1.3 Масштабируемость
- Горизонтальное масштабирование веб-сервера
- Вертикальное масштабирование базы данных
- Использование кэширования для часто запрашиваемых данных

### 4.2 Надёжность (NFR-2)

#### NFR-2.1 Доступность
- Время работы системы: 99.5% (SLA)
- Плановые окна обслуживания: не более 4 часов в месяц
- Автоматическое восстановление после сбоев

#### NFR-2.2 Резервное копирование
- Полное резервное копирование БД: ежедневно в 02:00
- Инкрементальное копирование: каждые 6 часов
- Хранение резервных копий: 30 дней
- Тестирование восстановления: ежемесячно

#### NFR-2.3 Мониторинг
- Мониторинг доступности системы
- Контроль использования ресурсов
- Логирование ошибок и производительности
- Уведомления администраторов о критических событиях

### 4.3 Безопасность (NFR-3)

#### NFR-3.1 Аутентификация и авторизация
- Хеширование паролей с использованием bcrypt (cost factor ≥ 12)
- JWT токены с подписью и временем жизни
- Двухфакторная аутентификация для администраторов (опционально)
- Принудительная смена паролей каждые 90 дней

#### NFR-3.2 Защита от атак
- **SQL-инъекции**: использование параметризованных запросов и ORM
- **XSS**: валидация и экранирование пользовательского ввода
- **CSRF**: токены CSRF для изменяющих операций
- **Brute Force**: ограничение количества попыток входа
- **File Upload**: валидация типов и размеров файлов

#### NFR-3.3 Шифрование данных
- HTTPS для всех соединений (TLS 1.3)
- Шифрование чувствительных данных в БД
- Безопасное хранение конфигурационных файлов

#### NFR-3.4 Аудит и логирование
- Логирование всех действий пользователей
- Логирование административных операций
- Защищённое хранение логов
- Регулярный анализ логов безопасности

### 4.4 Удобство использования (NFR-4)

#### NFR-4.1 Пользовательский интерфейс
- Адаптивный дизайн для ПК, планшетов и мобильных устройств
- Интуитивно понятная навигация
- Соответствие принципам Material Design
- Поддержка русского языка

#### NFR-4.2 Доступность
- Соответствие стандартам WCAG 2.1 (уровень AA)
- Поддержка клавиатурной навигации
- Контрастность цветов не менее 4.5:1
- Альтернативный текст для изображений

### 4.5 Совместимость (NFR-5)

#### NFR-5.1 Браузеры
- Google Chrome 90+
- Mozilla Firefox 85+
- Microsoft Edge 90+
- Safari 14+ (для macOS/iOS)

#### NFR-5.2 Операционные системы
- Windows 10/11
- macOS 10.15+
- Ubuntu 20.04+
- CentOS 8+

#### NFR-5.3 Мобильные устройства
- iOS 14+
- Android 8.0+

---

## 5. Анализ рисков

### 5.1 Технические риски

| Риск | Вероятность | Влияние | Меры митигации |
|------|-------------|---------|----------------|
| Проблемы производительности при росте данных | Средняя | Высокое | Оптимизация запросов БД, индексы, кэширование |
| Сбои интеграции между компонентами | Низкая | Высокое | Автоматическое тестирование, мониторинг |
| Уязвимости безопасности | Средняя | Критическое | Аудит безопасности, регулярное обновление зависимостей |
| Потеря данных | Низкая | Критическое | Резервное копирование, репликация БД |

### 5.2 Проектные риски

| Риск | Вероятность | Влияние | Меры митигации |
|------|-------------|---------|----------------|
| Изменение требований | Высокая | Среднее | Agile методология, итеративная разработка |
| Превышение сроков разработки | Средняя | Высокое | Детальное планирование, контроль прогресса |
| Недостаток экспертизы в команде | Низкая | Высокое | Обучение команды, привлечение консультантов |
| Проблемы с инфраструктурой заказчика | Средняя | Среднее | Требования к инфраструктуре, тестирование развёртывания |

### 5.3 Операционные риски

| Риск | Вероятность | Влияние | Меры митигации |
|------|-------------|---------|----------------|
| Отказ от использования системы | Низкая | Критическое | UX тестирование, обучение пользователей |
| Недостаточная поддержка руководства | Низкая | Высокое | Демонстрация ценности, регулярная отчётность |
| Конфликты между ролями пользователей | Средняя | Среднее | Чёткое разграничение прав, документация процессов |

---

## 6. Приоритизация требований

### 6.1 Критическая важность (Must Have)
1. Аутентификация и авторизация пользователей
2. Создание и редактирование дефектов
3. Управление статусами дефектов
4. Базовая система ролей
5. Основные функции поиска и фильтрации

### 6.2 Высокая важность (Should Have)
1. Управление проектами и этапами
2. Назначение исполнителей и сроков
3. Комментарии и история изменений
4. Загрузка вложений
5. Базовая отчётность

### 6.3 Средняя важность (Could Have)
1. Аналитические дашборды
2. Экспорт в различные форматы
3. Расширенные фильтры и поиск
4. Уведомления по email
5. Мобильная адаптация

### 6.4 Низкая важность (Won't Have в первой версии)
1. Интеграция с внешними системами
2. Мобильные приложения
3. Расширенная аналитика
4. Workflow автоматизация
5. Многоязычность

---

## 7. Критерии приёмки

### 7.1 Функциональные критерии
- Все требования категории "Must Have" реализованы на 100%
- Все требования категории "Should Have" реализованы на 90%
- Система проходит все пользовательские сценарии без критических ошибок
- Все роли пользователей работают согласно спецификации

### 7.2 Технические критерии
- Время отклика страниц не превышает 1 секунды
- Система выдерживает нагрузку 50 одновременных пользователей
- Покрытие кода тестами составляет не менее 80%
- Все уязвимости категории "Высокая" и "Критическая" устранены

### 7.3 Критерии качества
- Система развёртывается из коробки с помощью Docker
- Документация покрывает все аспекты использования и администрирования
- Интерфейс соответствует принципам UX и адаптивен
- Код соответствует стандартам качества и читаемости

---

## 8. Трассируемость требований

### 8.1 Связь требований с пользовательскими историями

| Требование | User Story | Тест-кейс |
|-----------|------------|-----------|
| FR-1.1 | US-001: Как администратор, я хочу создавать аккаунты пользователей | TC-001 |
| FR-1.2 | US-002: Как пользователь, я хочу войти в систему | TC-002 |
| FR-3.1 | US-010: Как инженер, я хочу зарегистрировать дефект | TC-010 |
| FR-3.2 | US-011: Как менеджер, я хочу отслеживать статус дефектов | TC-011 |

### 8.2 Связь с архитектурными компонентами

| Требование | Компонент | Модуль |
|-----------|-----------|--------|
| FR-1.* | Authentication Service | apps.users |
| FR-2.* | Project Management | apps.projects |
| FR-3.* | Defect Management | apps.defects |
| FR-5.* | Reporting Service | apps.reports |

---

## 9. Заключение

Данная техническая спецификация определяет полный набор требований к системе управления дефектами на строительных объектах. Документ служит основой для:

1. **Проектирования архитектуры** системы
2. **Планирования разработки** и оценки трудозатрат
3. **Создания тест-планов** и критериев приёмки
4. **Контроля качества** на всех этапах разработки

Спецификация будет обновляться по мере развития проекта с учётом обратной связи от заказчика и результатов тестирования.

---

**Документ согласован:**
- Техническая команда: [подпись]
- Менеджер проекта: [подпись]  
- Представитель заказчика: [подпись]

**История изменений:**

| Версия | Дата | Автор | Описание изменений |
|--------|------|-------|-------------------|
| 1.0 | Январь 2024 | Команда разработки | Первоначальная версия |
