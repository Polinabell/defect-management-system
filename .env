# Пример файла переменных окружения для системы управления дефектами
# Скопируйте этот файл в .env и заполните реальными значениями

# === ОСНОВНЫЕ НАСТРОЙКИ ===
# Секретный ключ Django (генерируйте новый для production!)
SECRET_KEY=your-super-secret-key-here-change-me-in-production

# Режим отладки (False для production)
DEBUG=True

# Разрешённые хосты (через запятую)
ALLOWED_HOSTS=localhost,127.0.0.1,defect-management.local

# Версия приложения
APP_VERSION=1.0.0

# Среда выполнения (development, staging, production)
ENVIRONMENT=development

# === БАЗА ДАННЫХ ===
# PostgreSQL настройки
DB_NAME=defect_management
DB_USER=postgres
DB_PASSWORD=postgres
DB_HOST=localhost
DB_PORT=5432

# URL подключения к БД (альтернативный способ)
DATABASE_URL=postgres://postgres:postgres@localhost:5432/defect_management

# === REDIS ===
# Redis настройки
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password
REDIS_DB=0

# URL подключения к Redis
REDIS_URL=redis://:redis_password@localhost:6379/0

# === CELERY ===
# Celery broker URL
CELERY_BROKER_URL=redis://:redis_password@localhost:6379/0

# Celery result backend
CELERY_RESULT_BACKEND=redis://:redis_password@localhost:6379/0

# Настройки Celery worker
CELERY_WORKER_CONCURRENCY=2
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240
CELERY_LOG_LEVEL=info

# === EMAIL ===
# SMTP настройки
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password

# От кого отправлять письма
DEFAULT_FROM_EMAIL=noreply@defect-management.com
SERVER_EMAIL=server@defect-management.com

# === ФАЙЛОВОЕ ХРАНИЛИЩЕ ===
# Локальное хранилище
MEDIA_ROOT=/app/media
STATIC_ROOT=/app/static

# AWS S3 (для production)
USE_S3=False
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_STORAGE_BUCKET_NAME=defect-management-files
AWS_S3_REGION_NAME=us-east-1

# === БЕЗОПАСНОСТЬ ===
# CORS настройки
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# CSRF настройки
CSRF_TRUSTED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Session cookie settings
SESSION_COOKIE_SECURE=False
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# CSRF cookie settings
CSRF_COOKIE_SECURE=False
CSRF_COOKIE_HTTPONLY=True
CSRF_COOKIE_SAMESITE=Lax

# === МОНИТОРИНГ ===
# Sentry для отслеживания ошибок
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# Prometheus метрики
PROMETHEUS_METRICS_ENABLED=True

# === ЛОГИРОВАНИЕ ===
# Уровень логирования
LOG_LEVEL=INFO

# Директория для логов
LOG_DIR=/app/logs

# === GUNICORN ===
# Настройки Gunicorn для production
GUNICORN_WORKERS=3
GUNICORN_WORKER_CLASS=sync
GUNICORN_WORKER_CONNECTIONS=1000
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=50
GUNICORN_TIMEOUT=120
GUNICORN_KEEPALIVE=2
GUNICORN_LOG_LEVEL=info

# === МОНИТОРИНГ ===
# Grafana настройки
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_DOMAIN=grafana.defect-management.com

# Prometheus настройки
PROMETHEUS_RETENTION_TIME=30d

# === ВНЕШНИЕ СЕРВИСЫ ===
# SMS сервис
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_FROM_PHONE=+1234567890

# Push уведомления
PUSH_NOTIFICATIONS_ENABLED=False
FCM_SERVER_KEY=your-fcm-server-key

# === РЕЗЕРВНОЕ КОПИРОВАНИЕ ===
# S3 для бэкапов
S3_BACKUP_BUCKET=defect-management-backups
BACKUP_RETENTION_DAYS=30

# === DJANGO SETTINGS ===
# Суперпользователь по умолчанию
DJANGO_SUPERUSER_EMAIL=admin@defect-management.com
DJANGO_SUPERUSER_PASSWORD=admin123

# Загрузка начальных данных
LOAD_FIXTURES=True

# === FRONTEND ===
# URL API для frontend
REACT_APP_API_URL=http://localhost:8000/api

# WebSocket URL
REACT_APP_WS_URL=ws://localhost:8000/ws

# === DEVELOPMENT ===
# Включить Django toolbar в разработке
USE_DEBUG_TOOLBAR=True

# Включить Silk profiler
USE_SILK_PROFILER=False

# === TESTING ===
# Настройки для тестирования
TEST_RUNNER=pytest

# Покрытие тестами
COVERAGE_MINIMUM=80

# === WEBHOOKS ===
# Webhook секреты для интеграций
WEBHOOK_SECRET_KEY=your-webhook-secret-key

# === RATE LIMITING ===
# Настройки ограничения скорости
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60

# === CACHE ===
# Время кэширования (в секундах)
CACHE_TIMEOUT=300
CACHE_DEFAULT_TIMEOUT=300

# === INTERNATIONALIZATION ===
# Язык по умолчанию
LANGUAGE_CODE=ru-ru
TIME_ZONE=Europe/Moscow
USE_I18N=True
USE_L10N=True
USE_TZ=True

# === CUSTOM SETTINGS ===
# Максимальный размер файла (в байтах)
MAX_FILE_SIZE=52428800  # 50MB

# Разрешённые типы файлов
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx

# Время жизни JWT токенов (в минутах)
JWT_ACCESS_TOKEN_LIFETIME=60
JWT_REFRESH_TOKEN_LIFETIME=10080  # 7 дней

# === FLOWER ===
# Celery Flower мониторинг
FLOWER_USER=admin
FLOWER_PASSWORD=admin
FLOWER_PORT=5555
